"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3642],{107981:(e,t,n)=>{n.d(t,{Z:()=>a});let a=(0,n(667294).createContext)(null)},95732:(e,t,n)=>{n.d(t,{Z:()=>a});let a=(0,n(667294).createContext)(null)},603642:(e,t,n)=>{n.d(t,{Z:()=>ea});var a=n(667294),r=n(705895),o=n(685679),i=n(608029),s=n(297329),l=n(107860),c=n(906623),d=n(521525),p=n(819281),u=n(793250),m=n(309300);let y=({constraintMap:e,initialNavTiming:t,annotations:n})=>({...n,...(0,m.jh)("constraint_",e),...(0,m.jh)("mark_",(0,l.gQ)()),...(0,m.jh)("browser_",{...t?(0,m.D3)(t):{},...(0,m.rX)()})});var g=n(840387);let f=(e,t)=>[...e.map(e=>(0,g.Z)(e,t)).filter(Boolean)];var S=n(302234),T=n(663678),_=n(953565);let h=e=>e<=2500?"Good":e>2500&&e<=4e3?"Needs Improvement":"Poor",v=({eventPrefix:e,endTime:t,tags:n,resourceArr:a,resourceType:r="allResources"})=>{let o=a.length;if(o>0&&"object"==typeof a[0]&&!Array.isArray(a[0])){let i=[...a].sort((e,t)=>e.fetchStart-t.fetchStart),s=[...a].sort((e,t)=>e.responseEnd-t.responseEnd),l=1,c=t/5,d=0;for(;l<=5;){let t=0;for(;d<=o-1&&i[d].fetchStart<=c*l;)d+=1,t+=1;(0,_.S0)(`${e}.tags.${r}.fetchStartInterval${l}of5`,t,{sampleRate:.2,tags:n}),(0,_.S0)(`${e}.${r}.fetchStartInterval${l}of5`,t,{sampleRate:.2}),l+=1}let p={zeroPercentInFlight:i[0].fetchStart,twentyFivePercentInFlight:i[Math.floor(o/4)].fetchStart,fiftyPercentInFlight:i[2*Math.floor(o/4)].fetchStart,seventyFivePercentInFlight:i[3*Math.floor(o/4)].fetchStart,hundredPercentInFlight:i[o-1].fetchStart,twentyFivePercentComplete:s[Math.floor(o/4)].responseEnd,fiftyPercentComplete:s[2*Math.floor(o/4)].responseEnd,seventyFivePercentComplete:s[3*Math.floor(o/4)].responseEnd,hundredPercentComplete:s[o-1].responseEnd};for(let t in p)p[t]&&((0,_.LY)(`${e}.tags.${r}.${t}`,p[t],{sampleRate:.2,tags:n}),(0,_.LY)(`${e}.${r}.${t}`,p[t],{sampleRate:.2}))}},E=({annotateExperiments:e,endTime:t,entries:n,metricId:a,pwtStaticContext:r})=>{let o=`${(0,T.Z)(r)}.${a.surface}`,i=[o];e&&e.forEach(e=>{let t=r.getExperimentGroup(e)||"null";i.push(`${o}.${e}.${t}`)});let s={lcpTimingBucket:h((0,S.Bn)())||"unknown",isAuthenticated:r.isAuthenticated,navigationType:a.navigationType},l=Array.from(n.filter(e=>"number"==typeof e.encodedBodySize&&e.encodedBodySize>=1e4&&e.responseEnd<=t)),c=[],d=[],p=[],u=[],m=[];l.forEach(e=>{"img"===e.initiatorType?c.push(e):"css"===e.initiatorType?d.push(e):"script"===e.initiatorType?p.push(e):"xmlhttprequest"===e.initiatorType?u.push(e):"link"===e.initiatorType&&e.name.includes("i.pinimg.com")&&m.push(e)}),i.forEach(e=>{v({eventPrefix:e,endTime:t,tags:s,resourceArr:l}),v({eventPrefix:e,endTime:t,tags:s,resourceArr:c,resourceType:"image"}),v({eventPrefix:e,endTime:t,tags:s,resourceArr:d,resourceType:"css"}),v({eventPrefix:e,endTime:t,tags:s,resourceArr:p,resourceType:"scripts"}),v({eventPrefix:e,endTime:t,tags:s,resourceArr:u,resourceType:"xhr"}),v({eventPrefix:e,endTime:t,tags:s,resourceArr:m,resourceType:"preloadedImage"})})};var w=n(279600);let A=({startTime:e,responseEnd:t},n)=>e>n.endTime||!!t&&t<n.startTime,C=({type:e,annotateExperiments:t,annotations:n,binaryAnnotations:a,constraintMap:r,endTime:o,imageTimings:i,metricId:s,pwtStaticContext:l,startTime:c,traceId:m,spans:g})=>{let S;let T=(0,w.Cg)();"initial_app_load"===s.navigationType&&(S=(0,p.Z)());let _=i.map(({name:e})=>e),h=T.map(e=>(0,u.p)(e,_)).filter(({timing:e})=>!A(e,{startTime:c,endTime:o}));return("board"===s.surface||"pin_closeup"===s.surface)&&E({annotateExperiments:t,endTime:o,entries:T,metricId:s,pwtStaticContext:l}),{traceId:m,startTime:c,endTime:o,spans:f(h,m).concat(g),annotationMap:y({constraintMap:r,initialNavTiming:S,annotations:n}),binaryAnnotationMap:(0,d.rA)({type:e,annotateExperiments:t,binaryAnnotations:a,entries:T,metricId:s,performanceResources:h,pwtEndTime:o,pwtStaticContext:l})}},I=({annotateExperiments:e,annotations:t,binaryAnnotations:n,constraintMap:a,endTime:r,imageTimings:o,metricId:i,pwtStaticContext:s,startTime:l,traceId:c,spans:d})=>({type:"COMPLETE",...C({type:"COMPLETE",annotateExperiments:e,annotations:t,binaryAnnotations:n,constraintMap:a,endTime:r,imageTimings:o,metricId:i,pwtStaticContext:s,startTime:l,traceId:c,spans:d})}),M=({reason:e,annotateExperiments:t,annotations:n,binaryAnnotations:a,constraintMap:r,endTime:o,imageTimings:i,metricId:s,pwtStaticContext:l,startTime:c,traceId:d,spans:p})=>({type:"ABORT",reason:e,...C({type:"ABORT",annotateExperiments:t,annotations:n,binaryAnnotations:a,constraintMap:r,endTime:o,imageTimings:i,metricId:s,pwtStaticContext:l,startTime:c,traceId:d,spans:p})});var b=n(404373);let k=!1,$=(e,t)=>{if(e&&t){if(!k)return k=!0,t;(0,s.H)("duplicated_initial_app_load_surface_pwt")}return(0,b.Z)()};var N=n(363404),Z=n(991323),R=n(438555),O=n(367180);let P=e=>{let t=performance.getEntriesByType("resource").filter(e=>e.name.includes("i.pinimg")).reduce((e,t)=>{let n=t.name.replace(".jpg","").split("/");return{[n[n.length-1]]:{downloadSize:t.name.split("/")[3].split("x")[0]},...e}},{});[...Array.from(document.getElementsByTagName("img")).map(e=>{let n=e.src.replace(".jpg","").split("/"),a=n[n.length-1];if(t[a]){let n=O.rZ(e)?.width||1,r=t[a].downloadSize;return{fileName:a,renderedSize:n,downloadedSize:r,ratio:r/n}}return{fileName:a,renderedSize:1,downloadedSize:1,ratio:1}}),...Array.from(document.querySelectorAll('div[role="img"]')).map(e=>{let n=e.style.backgroundImage.split('"')[1].replace(".jpg","").split("/"),a=n[n.length-1];if(t[a]&&e instanceof HTMLDivElement){let n=O.rZ(e)?.width||1,r=t[a].downloadSize;return{fileName:a,renderedSize:n,downloadedSize:r,ratio:r/n}}return{fileName:a,renderedSize:1,downloadedSize:1,ratio:1}})].forEach(t=>{let{ratio:n,fileName:a,downloadedSize:r}=t;t.ratio>1.05&&(0,s.A9)(`checkImageRatio.${e}`,{count:Math.round(10*n)/10,tags:{fileName:`${r}_${a}`}})})};var L=n(970126),B=n(5859);let x=(e,t)=>{let n=(0,a.useRef)(t);return{getState:()=>n.current,dispatch:t=>{n.current=e(n.current,t)}}};var D=n(184960),z=n(785893);let j=["initial_app_load","client_route_push"],H=(0,i.XV)("PwtSurface"),q="NavigationComplete",U="VisuallyComplete",G=(e,t,n,a)=>{let{metricConfig:{metricId:r,pwtStaticContext:o,annotateExperiments:i},annotations:s,binaryAnnotations:l,constraintMap:c,startTime:d,imageTimings:p,isSampled:u,spans:m}=e,y=$("initial_app_load"===r.navigationType,o.serverData?.trace_id),g=M({reason:t,annotateExperiments:i,annotations:s,binaryAnnotations:l,constraintMap:c,endTime:n,imageTimings:p,metricId:r,pwtStaticContext:o,startTime:d,traceId:y,spans:m});u&&!a&&(0,N.Z)({metricId:r,pwtStaticContext:o,result:g})},J=(e,t,n)=>{let{metricConfig:{metricId:a,pwtStaticContext:r,annotateExperiments:i},annotations:c,binaryAnnotations:d,constraintMap:p,startTime:u,imageTimings:m,isSampled:y,spans:g}=e;(0,l.L8)(`PWT_Complete_${(0,o.KJ)(a)}`);let f=$("initial_app_load"===a.navigationType,r.serverData?.trace_id),S=I({annotateExperiments:i,annotations:c,binaryAnnotations:d,constraintMap:p,endTime:t,imageTimings:m,metricId:a,pwtStaticContext:r,startTime:u,traceId:f,spans:g});y&&!n&&(0,N.Z)({metricId:a,pwtStaticContext:r,result:S});try{P(String(S.binaryAnnotationMap["metricId.surface"].value))}catch(e){(0,s.H)("image_ratio_check_error",{error:e})}return{...e,result:S,status:"DONE"}},F=(e,t)=>{if(e.metricConfig.constraints.every(t=>e.constraintMap[t])){let n=Math.max(...e.metricConfig.constraints.map(t=>e.constraintMap[t]));return J(e,n,t)}return H(`Remaining constraints: ${e.metricConfig.constraints.filter(t=>!e.constraintMap[t]).join(", ")}`),e},K=(e,t)=>{let{constraint:n,time:a,disablePWTLogging:r}=t,i=(0,o.KJ)(e.metricConfig.metricId);return L.Z?e.metricConfig.constraints.find(e=>e===n)?e.constraintMap[n]?(H(`constraint "${n}" is already complete.`),(0,s.H)("duplicated_constraint_complete",{constraint:n,action:i}),e):(H(`marking constraint "${n}" as complete`),(0,l.ZP)(`constraint_${n}_is_complete`),F({...e,constraintMap:{...e.constraintMap,[n]:a||L.Z.now()}},r)):(H(`marked constraint "${n}" is not a required constraint.`),e):((0,s.H)("missing_window_performance",{action:i}),e)},V=(e,t)=>{if(!L.Z){let t=(0,o.KJ)(e.metricConfig.metricId);(0,s.H)("missing_window_performance",{action:t})}H(`removing constraint "${t}"`);let n=e.metricConfig.constraints.filter(e=>e!==t),{[t]:a,...r}=e.constraintMap;return F({...e,constraintMap:r,metricConfig:{...e.metricConfig,constraints:n}})},W=(e,t)=>{if(!L.Z){let t=(0,o.KJ)(e.metricConfig.metricId);(0,s.H)("missing_window_performance",{action:t})}H(`updating pwt segment to "${t}"`);let n={...e.metricConfig.metricId,segment:t};return{...e,metricConfig:{...e.metricConfig,metricId:n}}},Y=(e,t)=>{let{metricConfig:n,startTime:a,isSampled:r,disablePWTLogging:i}=t;if(i||"TIMING"!==e.status||a===e.startTime||G(e,"routeUpdatedOnSameSurface",L.Z?.now()||0,i),!n)return{status:"DISABLED",metricConfig:null};let l=(0,o.KJ)(n.metricId);return"TIMING"===e.status&&e.startTime===a&&e.constraintMap[q]?((0,s.H)("duplicated_init_route_action",{action:l}),e):(i||("Other"===n.pwtStaticContext.browserName&&!1===n.metricId.isAuthenticated&&"initial_app_load"===n.metricId.navigationType?((0,s.A9)(`TIMING.${l}`,{tags:{userAgent:window?.navigator?.userAgent}}),(0,s.A9)(`TIMING.sampled.${l}`,{tags:{userAgent:window?.navigator?.userAgent},sampleRate:.03})):((0,s.A9)(`TIMING.${l}`),(0,s.A9)(`TIMING.sampled.${l}`,{sampleRate:.03}))),K({status:"TIMING",metricConfig:n,startTime:a,constraintMap:{},annotations:{},binaryAnnotations:{},imageTimings:[],isSampled:r,spans:[]},{constraint:q,disablePWTLogging:i}))},X=(e,t)=>{if(H("dispatch action",t),"INIT_ROUTE"===t.type)return Y(e,t.payload);if("TIMING"!==e.status)return H(`ignoring action due to invalid state ${e.status}`,t),e;switch(t.type){case"ABORT":G(e,t.reason,L.Z?.now()||0);let n={type:"ABORT",reason:t.reason};return{...e,status:"DONE",result:n};case"ANNOTATE":let{name:a}=t.payload;if(!L.Z)return e;let r=L.Z.now();return H(`adding annotation {${a}: ${r}}`),{...e,annotations:{...e.annotations,[a]:r}};case"BINARY_ANNOTATE":let{name:i,value:l,annotationType:c}=t.payload;return H(`adding binary annotation {${i}: ${l}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,[i]:{value:l,type:c}}};case"MARK_CONSTRAINT_COMPLETE":return K(e,t.payload);case"REMOVE_CONSTRAINT":return V(e,t.payload);case"SET_SEGMENT":return W(e,t.payload);case"SET_VISUALLY_COMPLETE_RESULT":{let{payload:{imageTimings:n}}=t;if(0===n.length)return G(e,"visuallyComplete_noImages",L.Z?.now()||0),{...e,status:"DONE",result:{type:"ABORT",reason:"visuallyComplete_noImages"}};let a=Math.max(...n.map(e=>e.responseEnd||0));return K({...e,imageTimings:n},{constraint:U,time:a})}case"ADD_SUBSPAN":let{startTime:d}=e,{payload:{name:p,startTime:u,endTime:m,annotations:y,binaryAnnotations:g,parentId:f}}=t;return{...e,spans:[...e.spans,{name:p,id:(0,b.Z)(),startTime:u||d,endTime:m,annotationMap:{...y},binaryAnnotationMap:{...g},parentId:f}]};case"START_SUBSPAN":return{...e,spans:[...e.spans,{name:t.payload.name,id:(0,b.Z)(),startTime:L.Z?L.Z.now():0,endTime:1/0,annotationMap:{...t.payload.annotations},binaryAnnotationMap:{...t.payload.binaryAnnotations},parentId:t.payload.parentId}]};case"STOP_SUBSPAN":let S=e.spans.findIndex(e=>e.name===t.payload.name);return S>-1?(e.spans[S].endTime=L.Z?L.Z.now():0,t.payload.annotations&&(e.spans[S].annotationMap={...e.spans[S].annotationMap,...t.payload.annotations}),t.payload.binaryAnnotations&&(e.spans[S].binaryAnnotationMap={...e.spans[S].binaryAnnotationMap,...t.payload.binaryAnnotations})):(0,s.H)("invalid_subspan_stop_name",{name:t.payload.name}),e;default:let T=(0,o.KJ)(e.metricConfig.metricId);return(0,s.H)("invalid_pwt_surface_action",{action:T}),e}},Q=e=>{if(!e)return"initial_app_load";switch(e.action){case"PUSH":return"client_route_push";case"REPLACE":return"client_route_replace";default:return null}},ee=new Set,et=({surface:e,constraints:t,segment:n,measureGridVisuallyComplete:o,annotateExperiments:i,customEnabledNavigationTypes:s,navigationInfo:{clientNavigation:l,navigationType:c},sampleRate:d})=>{let p=(0,a.useRef)("NOT_SET"),u=(0,R.Z)(),{getState:m,dispatch:y}=x(X,{status:"DISABLED",metricConfig:null}),g=(0,B.B)();if(p.current!==l&&(p.current=l,u)){let{isAuthenticated:a}=u,r=e&&c&&(s||j).includes(c)?{metricId:{type:"surface",surface:e,navigationType:c,isAuthenticated:a,segment:n},annotateExperiments:i,constraints:[q,...t||[],...o?[U]:[]],pwtStaticContext:u}:null;(0,_.nP)("webapp.pwt_surface.init_route",{tags:{surface:e,navigationType:c,isAuthenticated:a}});let p=!ee.has(l);y({type:"INIT_ROUTE",payload:{metricConfig:r,startTime:l?l.time:0,isSampled:!d||Math.random()<d,disablePWTLogging:!p}}),p&&ee.add(l)}let f=m();if((0,a.useEffect)(()=>()=>{ee.delete(l)},[l]),(0,a.useEffect)(()=>{let e=e=>{y({type:"ABORT",reason:e})};r.Z.onSessionPause(e);let t=window.innerHeight,n=window.innerWidth,a=()=>{let e=Math.abs(window.innerHeight-t),r=Math.abs(window.innerWidth-n),o=window.innerHeight!==t,i=window.innerWidth!==n,s={handler:(0,D.H)(),deviceType:u?.deviceType??"unknown",isAuthenticated:u?.isAuthenticated??"unknown",platform:g.userAgent.platform??"unknown"};if((0,_.nP)("webapp.PwtLogger.handleResize",{sampleRate:1,tags:{...s,heightChanged:o,widthChanged:i}}),o&&(0,_.S0)("webapp.PwtLogger.resizeHeightDelta",e,{sampleRate:1,tags:s}),i&&(0,_.S0)("webapp.PwtLogger.resizeWidthDelta",r,{sampleRate:1,tags:s}),window.removeEventListener("resize",a),u?.deviceType==="phone"&&(!i&&o&&e<=150||!o&&!i)||u?.deviceType==="desktop"&&!o&&!i){(0,_.nP)("webapp.PwtLogger.skipResizeAbort",{sampleRate:1,tags:{...s,heightChanged:o,widthChanged:i}});return}y({type:"ABORT",reason:"windowResized"})};return window.addEventListener("resize",a),()=>{let t=m();H("handling unmount",t),"TIMING"===t.status&&G(t,"unmount",L.Z?.now()||0),r.Z.removePauseListener(e),window.removeEventListener("resize",a)}},[]),"TIMING"!==f.status||!f.constraintMap[q])return{state:f,context:null};let{startTime:S,metricConfig:T}=f;return{state:f,context:{abort:e=>y({type:"ABORT",reason:e}),addAnnotation:e=>y({type:"ANNOTATE",payload:{name:e}}),addBinaryAnnotation:(e,t,n)=>y({type:"BINARY_ANNOTATE",payload:{name:e,value:t,annotationType:n}}),addSubspan:(e,t,n,a={},r={},o=null)=>y({type:"ADD_SUBSPAN",payload:{name:e,startTime:t,endTime:n,annotations:a,binaryAnnotations:r,parentId:o}}),getId:()=>S,getMetricId:()=>T.metricId,markConstraintComplete:e=>y({type:"MARK_CONSTRAINT_COMPLETE",payload:{constraint:e,time:L.Z?L.Z.now():0}}),removeConstraint:e=>y({type:"REMOVE_CONSTRAINT",payload:e}),setSegment:e=>y({type:"SET_SEGMENT",payload:e}),setVisuallyCompleteResult:T.constraints.includes(U)?e=>y({type:"SET_VISUALLY_COMPLETE_RESULT",payload:e}):null,startSubspan:(e,t={},n={},a=null)=>y({type:"START_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:n,parentId:a}}),stopSubspan:(e,t={},n={},a=null)=>y({type:"STOP_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:n,parentId:a}})}}},en=()=>{let e=(0,c.E)(),t=!!e;(0,a.useEffect)(()=>{if(t){let t=e?.getMetricId(),n=t?(0,o.KJ)(t):null;(0,s.H)("nested_pwt_surface",{action:n})}},[t])};function ea({children:e,...t}){let n=(0,Z.Z)(),a=Q(n),r=t.measureGridVisuallyComplete?["web_masonry_v2_auth","web_masonry_v2_unauth"]:[],o=[...t.annotateExperiments??[],...r],{context:i}=et({...t,annotateExperiments:o,navigationInfo:{navigationType:a,clientNavigation:n}});return en(),(0,z.jsx)(c.S,{value:i,children:e})}},253926:(e,t,n)=>{n.d(t,{cC:()=>o,jy:()=>r,qr:()=>s,sk:()=>i});let a=e=>"number"==typeof e?Math.round(e):e,r=e=>({type:"I16",value:a(e)}),o=e=>({type:"I32",value:a(e)}),i=e=>({type:"STRING",value:e}),s=e=>({type:"BOOL",value:e})},309300:(e,t,n)=>{n.d(t,{D3:()=>o,Hd:()=>l,jh:()=>s,rX:()=>i});var a=n(383340),r=n(302234);let o=e=>({...(0,a.Z)(e),domComplete:e.domComplete||0,domContentLoadedEventEnd:e.domContentLoadedEventEnd||0,domContentLoadedEventStart:e.domContentLoadedEventStart||0,domInteractive:e.domInteractive||0,loadEventEnd:e.loadEventEnd||0,loadEventStart:e.loadEventStart||0}),i=()=>{let{largestContentfulPaint:e}=(0,r.v2)();return{largestContentfulPaint:e||0}},s=(e,t)=>Object.keys(t).reduce((n,a)=>({...n,[`${e}${a}`]:t[a]}),{}),l=(e,t)=>Object.keys(e).reduce((n,a)=>t.includes(a)?{...n,[a]:e[a]}:n,Object.freeze({}))},521525:(e,t,n)=>{n.d(t,{E9:()=>c,ng:()=>T,rA:()=>h});var a=n(685679),r=n(107860),o=n(253926),i=n(302234),s=n(279600),l=n(788389);let c=(e,t)=>(e||[]).reduce((e,n)=>{let a=t(n);return a?{...e,[`experiment.${n}`]:(0,o.sk)(a)}:e},{}),d=(e,t)=>"number"==typeof t?e(t):null,p=e=>Number(Number(e/1024).toFixed(3)),u=e=>e.reduce((e,t)=>e+t,0),m=(e,t)=>Object.keys(t).reduce((n,a)=>({...n,[`${e}${a}`]:t[a]}),{}),y=e=>{if(!e.length)return{};let t=e.map(({startTime:e,requestStart:t,responseStart:n,responseEnd:a})=>{let r=t||e;return{startTime:e,requestStart:r,responseStart:n||r,responseEnd:a}}),n=u(t.map(e=>e.requestStart-e.startTime)),a=u(t.map(e=>e.responseStart-e.requestStart)),r=u(t.map(e=>e.responseEnd-e.responseStart)),i=u(e.map(e=>e.decodedBodySize||0));return{decodedBodySize:(0,o.cC)(p(i)),"duration.all":(0,o.cC)(n+a+r),"duration.requestStartToResponseStart":(0,o.cC)(a),"duration.responseStartToResponseEnd":(0,o.cC)(r),"duration.startToRequestStart":(0,o.cC)(n)}},g=e=>{let t=e.filter(e=>!!e.responseEnd);return{...e.length?{...y(t),"count.completed":(0,o.cC)(t.length)}:{},"count.all":(0,o.cC)(e.length)}},f=e=>{let t=["timeSecond1","timeSecond2","timeSecond3"],n={timeSecond1:{start:0,end:0,count:0},timeSecond2:{start:0,end:0,count:0},timeSecond3:{start:0,end:0,count:0}},a={script_deferred:[],external:[],visually_complete:[],script:[],css:[],video:[],image:[],xmlhttprequest:[],other:[]};if(e.length){let{requestStart:r,startTime:o}=e[0].timing,i=r||o;n.timeSecond1.start=i,n.timeSecond1.end=i+1e3,n.timeSecond2.start=i+1e3,n.timeSecond2.end=i+2e3,n.timeSecond3.start=i+2e3,n.timeSecond3.end=i+3e3,e.forEach(e=>{let{timing:r}=e;a[e.category]=a[e.category].concat([r]),e.isDeferred&&(a.script_deferred=a.script_deferred.concat([r])),e.isExternal&&(a.external=a.external.concat([r])),e.isVisuallyCompleteRequired&&(a.visually_complete=a.visually_complete.concat([r]));let{requestStart:o,startTime:i,responseEnd:s}=r,l=o||i;t.forEach(e=>{let{start:t,end:a}=n[e];l>=t&&l<a?n[e].count+=1:l<t&&s>t&&(n[e].count+=1)})})}let r={...m("concurrentRequests.",Object.keys(n).reduce((e,t)=>e={...e,[t]:(0,o.cC)(n[t].count)},{}))};return{...Object.keys(a).reduce((e,t)=>({...e,...m(`resource.${t}.`,g(a[t]))}),r)}},S=(e,t,n,r)=>{let i;let{devicePixelRatio:c,navigator:p,innerWidth:u,innerHeight:m,performance:y}=window,{deviceMemory:g,hardwareConcurrency:f,platform:S,userAgent:T,connection:_}=p,{memory:h}=y,{appType:v,appVersion:E,browserName:w,browserVersion:A,deviceType:C,isAppShell:I,isAuthenticated:M,isBot:b,isForcedReload:k,isSocialBot:$,locale:N,osName:Z,stageName:R,unauthId:O}=t,{navigationType:P}=e,L=null;if("initial_app_load"===P){i=1;let e=l.Z("navigation")[0]?.transferSize;L=e?parseFloat((.001*e).toFixed(1)):null}else i=4;let B={"app.type":(0,o.jy)("desktop"===C?v||5:v||6),"app.version":(0,o.sk)(E),"browser.name":(0,o.sk)(w),"browser.version":(0,o.sk)(A),"cpu.speed":(0,o.jy)(f),"device.memory":(0,o.jy)(g),"device.type":(0,o.jy)(0),"device.typeName":(0,o.sk)(C),"device.version":(0,o.sk)("unknown"),"pwt.cause":(0,o.jy)(i),"net.effectiveType":(0,o.sk)(_?.effectiveType||null),"net.downlink":(0,o.cC)(d(e=>10*Math.round(e/10),_?.downlink)),"net.downlinkMax":(0,o.cC)(d(e=>10*Math.round(e/10),_?.downlinkMax)),"net.rtt":(0,o.cC)(d(e=>10*Math.round(e/10),_?.rtt)),"net.speed":(0,o.cC)((0,s.Hv)(n,!1)),"pwt.result":(0,o.jy)("COMPLETE"===r?1:2),"view.type":(0,o.cC)(0),"viewport.height":(0,o.cC)(m||0),"viewport.width":(0,o.cC)(u||0),devicePixelRatio:(0,o.cC)(c||0),isAppShell:(0,o.qr)(I),isAuthenticated:(0,o.qr)(M),isBot:(0,o.qr)(b),isForcedReload:(0,o.qr)(k),isSocialBot:(0,o.qr)($),locale:(0,o.sk)(N),osName:(0,o.sk)(Z),...null!==L&&{htmlResponseSize:(0,o.cC)(L)},nextHopProtocol:(0,o.sk)(l.Z("navigation")[0]?.nextHopProtocol||null),platform:(0,o.sk)(S||null),profilerVersion:(0,o.sk)("3"),pwtActionName:(0,o.jy)((0,a.Rp)(e)),stageName:(0,o.sk)(R),userAgent:(0,o.sk)(T),usedJSHeapSize:(0,o.cC)(h?.usedJSHeapSize||0),totalJSHeapSize:(0,o.cC)(h?.totalJSHeapSize||0),jsHeapSizeLimit:(0,o.cC)(h?.jsHeapSizeLimit||0)};return M?B:{...B,unauthId:(0,o.sk)(O)}},T=({annotateExperiments:e,metricId:t,pwtStaticContext:n,binaryAnnotations:a={},performanceResourceTimings:r=[],type:i})=>({...c(e,n.getExperimentGroup),...S(t,n,r,i),...a,stopwatchVersion:(0,o.jy)(1)}),_=(e,t)=>{let{navigator:n}=window,{serviceWorker:a}=n,{surface:s,navigationType:l,isAuthenticated:c}=e,{cumulativeLayoutShiftScore:d,longTaskDurations:p}=(0,i.v2)();return{...p.length?{"longTask.count":(0,o.cC)(p.length),"longTask.maxDuration":(0,o.cC)(Math.max(...p)),"longTask.totalDuration":(0,o.cC)(u(p))}:{},cumulativeLayoutShiftScore:(0,o.cC)(100*d),"masonry.paginationMarkCount":(0,o.cC)((0,r.Ao)(r.at,t)),"metricId.isAuthenticated":(0,o.qr)(c),"metricId.navigationType":(0,o.sk)(l),"metricId.surface":(0,o.sk)(s),resourceBufferClearedCount:(0,o.jy)((0,r.Ao)("resourceBufferCleared",t)),scrollDuringLayout:(0,o.qr)((0,r.BA)("scrollDuringLayout",t)),serviceWorker:(0,o.qr)(a?!!a.controller:null),serviceWorkerState:(0,o.sk)(a?.controller?.state||null)}},h=({type:e,annotateExperiments:t,binaryAnnotations:n={},entries:a,metricId:r,performanceResources:o,pwtEndTime:i,pwtStaticContext:s})=>({...n,...f(o),...c(t,s.getExperimentGroup),...S(r,s,a,e),..._(r,i)})},819281:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(970126);let r=()=>{let[e]=a.Z?a.Z.getEntriesByType("navigation"):[];return e}},363404:(e,t,n)=>{n.d(t,{Z:()=>I});var a=n(120889),r=n(194087),o=n(685679),i=n(608029),s=n(297329);let l=null,c=(e,t)=>((l=l||{results:[],context:t}).results.push(e),l);var d=n(253926),p=n(819281),u=n(404373),m=n(788389);let y=(e,t)=>Object.keys(e).reduce((n,a)=>{let r=e[a];return r?{...n,[a]:{timestamp:t+r}}:n},{}),g=e=>Object.keys(e).reduce((t,n)=>{let a=e[n];if(!a)return t;let{value:r,type:o}=a;return null==r?t:t.concat({name:n,value:r,annotation_type:o})},[]),f=({span:e,timeOrigin:t})=>({id:e.id,parent_id:e.parentId||null,result:1,name:e.name,timestamp:t+e.startTime,duration:e.endTime-e.startTime,annotations:y(e.annotationMap,t),binary_annotations:g(e.binaryAnnotationMap)}),S=(e,{startTime:t,endTime:n,annotationMap:a,binaryAnnotationMap:r,parentId:o,traceId:i})=>({name:`pwt/${e}`,startTime:t,endTime:n,annotationMap:a,binaryAnnotationMap:r,parentId:o,id:i}),T=({annotations:e})=>e.reduce((e,{key:t,timestamp:n})=>({...e,[`server_${t}`]:{timestamp:n}}),{}),_=(e,t)=>({...e,annotations:{...T(t),...e.annotations},binary_annotations:[...t.binary_annotations,...e.binary_annotations]}),h=(e,t,n)=>{let a=(0,p.Z)();return a?.responseEnd?_(f({span:{name:"html",startTime:0,endTime:a?.responseEnd||1,annotationMap:{},binaryAnnotationMap:{nextHopProtocol:(0,d.sk)(m.Z("navigation")[0]?.nextHopProtocol||null)},id:e.server_span_id||(0,u.Z)(),parentId:t},timeOrigin:n}),e):null},v=({traceId:e,actionName:t,result:n,timeOrigin:a,serverDataToJoin:r})=>{let o=f({span:S(t,n),timeOrigin:a}),i=null;return r&&(o=_(o,r),i=h(r,e,a)),{trace_id:e,type:n.type,spans:[o,...i?[i]:[],...n.spans.map(e=>f({span:e,timeOrigin:a}))]}},E=e=>({debugTrace:r.eD,locale:e.locale,stageName:e.stageName});var w=n(953565);let A=(0,i.XV)("reportResult"),C=()=>window.performance?.now?Date.now()-window.performance.now():"unknown";function I({metricId:e,pwtStaticContext:t,result:n,isAuth:i}){let{serverData:l}=t,d=(0,o.KJ)(e),p=`${n.type}.${d}`,u=`${n.type}.sampled.${d}`,m=void 0!==i&&{tags:{isAuth:i}}||void 0;(0,s.A9)(n.reason?p.concat(`.${n.reason}`):p,m),(0,s.A9)(n.reason?u.concat(`.${n.reason}`):u,{...m,sampleRate:.03});let y=`${n.type}.${d}`;r.is||((0,w.S0)(`${y}.spans`,n.spans.length,{sampleRate:1}),(0,w.S0)(`${y}.annotatios`,Object.keys(n.annotationMap).length,{sampleRate:1})),"COMPLETE"!==n.type&&A(`Abort metric ${d}`,n);let g=C();if("unknown"===g){A(`Unable to convert to absolute times for ${d} due to missing time origin`),(0,s.A9)(`missingTimeOrigin.${d}`,m);return}if(r.is&&(window.PWT_LAB_DATA=c(n,t)),n.spans.length&&(n.spans=n.spans.map(e=>(e.parentId||e.id===n.traceId||"network_resources"===e.name||(e.parentId=n.traceId),e))),!r.is){let o=e.navigationType&&"initial_app_load"===e.navigationType,{traceId:i}=n,s=JSON.stringify(v({traceId:i,actionName:d,result:n,timeOrigin:g,serverDataToJoin:o&&l||null}));r.is||(0,w.S0)(`${y}.size`,s.length,{sampleRate:1}),(0,a.Z)({type:"POST",url:"/_/_/trace/trace/",data:{report_data:s,report_context:JSON.stringify(E(t))}}),A(`PinTrace ${d} will be available shortly: https://pintrace.pinadmin.com/zipkin/traces/${i.toString(16)}`,{duration:n.endTime-n.startTime,result:n,pwtStaticContext:t})}}},383340:(e,t,n)=>{n.d(t,{Z:()=>a});let a=e=>({connectEnd:e.connectEnd||0,connectStart:e.connectStart||0,domainLookupEnd:e.domainLookupEnd||0,domainLookupStart:e.domainLookupStart||0,fetchStart:e.fetchStart||0,requestStart:e.requestStart||0,redirectEnd:e.redirectEnd||0,redirectStart:e.redirectStart||0,responseEnd:e.responseEnd||0,responseStart:e.responseStart||0,secureConnectionStart:e.secureConnectionStart||0,startTime:e.startTime||0,workerStart:e.workerStart||0,unloadEventStart:e.unloadEventStart||0,unloadEventEnd:e.unloadEventEnd||0})},840387:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(253926),r=n(383340),o=n(404373);let i=({category:e,isDeferred:t,isExternal:n})=>[e].concat(t?["deferred"]:[]).concat(n?["external"]:[]).join("_");function s(e,t){let{category:n,timing:s,isDeferred:l,isExternal:c,isVisuallyCompleteRequired:d}=e;return s.responseEnd&&("image"!==n||d)?{name:i(e),id:(0,o.Z)(),parentId:t,startTime:s.startTime,endTime:s.responseEnd,annotationMap:(0,r.Z)(s),binaryAnnotationMap:{category:(0,a.sk)(n),decodedBodySize:(0,a.cC)(s.decodedBodySize||0),initiatorType:(0,a.sk)(s.initiatorType),isDeferred:(0,a.qr)(l),isExternal:(0,a.qr)(c),name:(0,a.sk)(s.name),nextHopProtocol:(0,a.sk)(s.nextHopProtocol),transferSize:(0,a.cC)(s.transferSize||0)}}:null}},991323:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(667294),r=n(107981);function o(){return(0,a.useContext)(r.Z)}},438555:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(667294),r=n(95732);function o(){return(0,a.useContext)(r.Z)}},302234:(e,t,n)=>{let a;n.d(t,{Bn:()=>y,Kj:()=>m,PJ:()=>c,UQ:()=>f,Ux:()=>d,on:()=>s,v2:()=>p});var r=n(987313),o=n(59648);let i={cumulativeLayoutShiftScore:0,longTaskDurations:[],largestContentfulPaint:null,elementTimings:[]},s=()=>{i.longTaskDurations=[]},l=(0,r.Z)(()=>i.elementTimings),c=()=>l.get(),d=e=>{e&&l.save(),i.elementTimings=[]},p=()=>i,u=0,m=()=>u,y=()=>a,g=e=>e.reduce((e,{identifier:t,loadTime:n,renderTime:a})=>e.concat("string"==typeof t&&"number"==typeof n&&"number"==typeof a?[{identifier:t,loadTime:n,renderTime:a}]:[]),[]),f=()=>{(0,o.Z)({type:"element",buffered:!0},e=>{i.elementTimings=i.elementTimings.concat(g(e.getEntries()))}),(0,o.Z)({entryTypes:["longtask"]},e=>{e.getEntries().map(e=>i.longTaskDurations.push(e.duration))},()=>s()),(0,o.Z)({type:"largest-contentful-paint",buffered:!0},e=>{let t=e.getEntries(),n=t.length,r=t[n-1];r&&(u=n,i.largestContentfulPaint=r.renderTime||r.loadTime||null,a=r.renderTime||r.loadTime||null)}),(0,o.Z)({type:"layout-shift",buffered:!0},e=>{e.getEntries().forEach(e=>{e.hadRecentInput||(i.cumulativeLayoutShiftScore+=e.value)})})}},663678:(e,t,n)=>{n.d(t,{Z:()=>a});let a=e=>{let{deviceType:t,isBot:n,isSocialBot:a}=e;return`coreWebVitalsLite.v1.${a&&"socialBot"||n&&"bot"||"nonbot"}.${t}`}},59648:(e,t,n)=>{n.d(t,{Z:()=>a});let a=(e,t,n)=>{if(!window.PerformanceObserver)return null;try{let a=new window.PerformanceObserver(t);return a.observe(e),window.addEventListener("beforeunload",()=>{a.disconnect()}),n&&window.addEventListener("popstate",()=>{n()}),a}catch(e){return null}}},404373:(e,t,n)=>{n.d(t,{Z:()=>a});function a(){let e="";for(let t=0;t<15;t+=1)e+="0123456789"[Math.floor(10*Math.random())];return Number(e)}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/3642-ef5dadb385167f5f.mjs.map